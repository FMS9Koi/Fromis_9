machine:
    environment:
        IMPORT_PATH: /home/ubuntu/.go_workspace/src/github.com/sn0w
        APP_PATH: $IMPORT_PATH/Karen

dependencies:
    override:
        - sudo add-apt-repository ppa:masterminds/glide -y
        - sudo apt update
        - sudo apt install glide -y

test:
    pre:
        - mkdir -p "$IMPORT_PATH"
        - ln -sf "$(pwd)" "$APP_PATH"
        - cd "$APP_PATH"
        - glide install
        - go build -v -o karen
        - mv karen $CIRCLE_ARTIFACTS/karen
    override:
        - cd "$APP_PATH"
        - go test -cover $(glide nv)
